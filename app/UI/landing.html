<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="TemplateMo">
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&display=swap" rel="stylesheet">

    <title>LineCheck</title>
<!--
https://github.com/CS222-UIUC/course-project-group-68.git
Lava Landing Page

https://templatemo.com/tm-540-lava-landing-page
-->

    <!-- Additional CSS Files -->
    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">

    <link rel="stylesheet" type="text/css" href="assets/css/font-awesome.css">

    <link rel="stylesheet" href="assets/css/templatemo-lava.css">

    <link rel="stylesheet" href="assets/css/owl-carousel.css">

    <style>
        #map {
            margin-top: 60px;
            height: 600px;
            width: 100%;
        }
        #table {
            padding-left: 50px;
        }
        .horizontal_line {
            background-color: rgb(0, 0, 0);
            width: 100%;
            height: 10px;
            line-height: 80%;
        }
    </style>

</head>

<body style="background-color: #ffffff">

    <!-- ***** Preloader Start ***** -->
    <div id="preloader">
        <div class="jumper">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    <!-- ***** Preloader End ***** -->


    <!-- ***** Header Area Start ***** -->
    <header class="header-area header-sticky">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <nav class="main-nav">
                        <!-- ***** Logo Start ***** -->
                        <a href="index.html" class="logo">
                            LINECHECK
                            
                        </a>
                        <!-- ***** Logo End ***** -->
                        <!-- ***** Menu Start ***** -->
                        <ul class="nav">
                            <a href="landing.html" class="navbar">Bars</a>
                            <a href="rest.html" class="navbar">Restaurants</a>
                        </ul>
                        <a class='menu-trigger'>
                            <span>Menu</span>
                        </a>
                        <!-- ***** Menu End ***** -->
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <!-- ***** Header Area End ***** -->

    <div id="map"></div>

    <script>
        function initMap() {
            var options = {
                zoom: 15.3,
                center:{lat:40.111,lng:-88.232985}
            }
            var map = new google.maps.Map(document.getElementById('map'), options);
        }
    </script>

<div class="horizontal_line"></div>

<div style="float: left; margin-left: 44%; margin-top: 40px; font-size: 70px;" id = "bar">
    <b>BARS</b>
</div>

<!-- <div style="float: left; margin-left: 400px; margin-top: 40px; font-size: 70px;">
    <b>RESTAURANTS</b>
</div> -->

<!-- <img src="/app/UI/assets/images/left-bg-decor.png" alt=""> -->

<div id="table">
    <font size="10" face="" >
    <table width="100%">
        <tr>
            <td width=600px height=400px>
                <a href="kams.html" type="button" class="submit">
                    <img src="assets/images/kams.png" alt=""
                        width="500px"
                        height=auto
                    />
                </a>
            </td>
            <td>
                Wait Time: <b> <span id="kamsTime">0</span> minutes</b>
                <br>Deal of the Day: <b><span id="kamsDeal"></b></span> </br>
            </td>
        </tr>
        <tr>
            <td width=600px height=auto>
                <a href="joes.html" type="button" class="submit">
                <img src="assets/images/image.png" alt=""
                    width="500px"
                    height=auto
                />
            </a>
            </td>
            <td>
                Wait Time: <b> <span id="joesTime">0</span> minutes</b>
                <br>Deal of the Day: <b>$2 Vodka Cran + Sprite</br></br>
            </td>
        </tr>

        <tr>
            <td width=600px height=500px>
                <a href="murphy.html" type="button" class="submit">
                <img src="assets/images/murphy.png" alt=""
                    width="500px"
                    height=auto
                />
            </a>
            </td>
            <td>
                Wait Time: <b><span id="murphyTime">0</span> minutes</b>
                <br>Deal of the Day: <b>$6 Glass + $3.50 Refill</br></br>
            </td>
        </tr>
        
        <tr>
            <td width=625px height=110%>
                <a href="lion.html" type="button" class="submit">
                <img src="assets/images/redlionlogo.png" alt=""
                    width="500px"
                    height=auto
                />
            </a>
            </td>
            <td>
                Wait Time: <b><span id="lionTime">0</span> minutes</b>
                <br>Deal of the Day: <b>$3 Seltzers</br></br>
            </td>
        </tr>
        
    </table></font>
</div>




    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD7UGJg7q9aqhjERwE9v6adfto6Fl4Esb8&callback=initMap&v=weekly"
    ></script>




    <!-- ***** Footer Start ***** -->
    <footer id="contact-us">
        <div class="container">
            <div class="footer-content">
                <div class="row">
                    
                    
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="sub-footer">
                        <p>Copyright &copy; 2020 LineCheck Landing Page

                        | Designed by Drew Patel, Stefan Ninic, Kaan Yigit, Pranav Penaganti<a rel="nofollow" href="https://templatemo.com"></a></p>
                    </div>
                </div>
            </div>
        </div>
    </footer>


    <!-- jQuery -->
    <script src="assets/js/jquery-2.1.0.min.js"></script>

    <!-- Bootstrap -->
    <script src="assets/js/popper.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>

    <!-- Plugins -->
    <script src="assets/js/owl-carousel.js"></script>
    <script src="assets/js/scrollreveal.min.js"></script>
    <script src="assets/js/waypoints.min.js"></script>
    <script src="assets/js/jquery.counterup.min.js"></script>
    <script src="assets/js/imgfix.min.js"></script>

    <!-- Global Init -->
    <script src="assets/js/custom.js"></script>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js";
        import { doc, addDoc, collection, getFirestore, query, where, getDocs } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-firestore.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-analytics.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyCjuTy0ppMWaBqC2G8NSl2-90U8KnVp54k",
          authDomain: "linecheck-6e161.firebaseapp.com",
          projectId: "linecheck-6e161",
          storageBucket: "linecheck-6e161.appspot.com",
          messagingSenderId: "624327964170",
          appId: "1:624327964170:web:5b599620a9226b455711f3",
          measurementId: "G-9SNERVZCPQ"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
	    const db = getFirestore(app);
        const analytics = getAnalytics(app);

        const waitRef = collection(db, "waitT");
//--------------------------------------------------------------------------------------------------------------------------------------------------------
        // Kams
        const kamsEl = document.getElementById("kamsTime");

        const kamsWaitTimes = query(waitRef, where("barName", "==", 'kams'), where("createdAt", ">", Math.floor(Date.now()) - 1800000));
        // Query
        const kamsDocs = await getDocs(kamsWaitTimes);

        let kamsArr = [];

        kamsDocs.forEach((el) => {
            kamsArr.push(el.data().time);
        })

        try {
            const kamsAvg = kamsArr.reduce((a, b) => a + b) / kamsArr.length;
            kamsEl.innerHTML = Math.round(kamsAvg);
        } catch (error) {}

        const kamsEl2 = document.getElementById("kamsDeal");
        switch (new Date().getDay()) {
            case 0:
                kamsEl2.innerHTML = "No Deals";
                break;
            case 1:
                kamsEl2.innerHTML = "$2 Blue Guys";
                break;
            case 2:
                kamsEl2.innerHTML = "$3 Big Cups";
                break;
            case 3:
                kamsEl2.innerHTML = "$3 Blue Lemonade";
                break;
            case 4:
                kamsEl2.innerHTML = "$2 U CALL IT";
                break;
            case 5:
                kamsEl2.innerHTML = "$2 Blue Guys";
                break;
            case 6:
                kamsEl2.innerHTML = "$2 Wells + Blue Guys";
            }

//--------------------------------------------------------------------------------------------------------------------------------------------------------
        // Joes
        const joesEl = document.getElementById("joesTime");

        const joesWaitTimes = query(waitRef, where("barName", "==", 'joes'), where("createdAt", ">", Math.floor(Date.now()) - 1800000));
        // Query
        const joesDocs = await getDocs(joesWaitTimes);

        let joesArr = [];

        joesDocs.forEach((el) => {
            joesArr.push(el.data().time);
        })

        try {
            const joesAvg = joesArr.reduce((a, b) => a + b) / joesArr.length;
            joesEl.innerHTML = Math.round(joesAvg);
        } catch (error) {}
//--------------------------------------------------------------------------------------------------------------------------------------------------------
        // Murphy
        const murphyEl = document.getElementById("murphyTime");

        const murphyWaitTimes = query(waitRef, where("barName", "==", 'murphy'), where("createdAt", ">", Math.floor(Date.now() - 1800000)));
        // Query
        const murphyDocs = await getDocs(murphyWaitTimes);

        let murphyArr = [];

        murphyDocs.forEach((el) => {
            murphyArr.push(el.data().time);
        })

        try {
            const murphyAvg = murphyArr.reduce((a, b) => a + b) / murphyArr.length;
            murphyEl.innerHTML = Math.round(murphyAvg);
        } catch (error) {}
//--------------------------------------------------------------------------------------------------------------------------------------------------------
        // Lion
        const lionEl = document.getElementById("lionTime");

        const lionWaitTimes = query(waitRef, where("barName", "==", 'lion'), where("createdAt", ">", Math.floor(Date.now()) - 1800000));
        // Query
        const lionDocs = await getDocs(lionWaitTimes);

        let lionArr = [];

        lionDocs.forEach((el) => {
            lionArr.push(el.data().time);
        })

        try {
            const lionAvg = lionArr.reduce((a, b) => a + b) / lionArr.length;
            lionEl.innerHTML = Math.round(lionAvg);
        } catch (error) {}
    </script>

    <script>

    </script>


</body>
</html>